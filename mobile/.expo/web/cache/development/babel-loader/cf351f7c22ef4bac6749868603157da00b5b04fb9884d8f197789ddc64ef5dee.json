{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Container, Form, Logo, Subtitle, Title, TitleDiv } from \"./styles\";\nimport Makeyourgologo from \"../../../assets/makeyourgo.svg\";\nimport { Input } from \"../../../components/Input\";\nimport { Button } from \"../../../components/Button\";\nimport { api } from \"../../../services/api\";\nimport * as Yup from \"yup\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport function ForgotPasswordFirstStep() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isDisabled = _useState4[0],\n    setIsDisabled = _useState4[1];\n  var navigation = useNavigation();\n  function handleNextStep() {\n    var schema, data;\n    return _regeneratorRuntime.async(function handleNextStep$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setIsDisabled(true);\n            _context.prev = 1;\n            schema = Yup.object().shape({\n              email: Yup.string().email(\"E-mail inválido\").required(\"E-mail é obrigatório\")\n            });\n            data = {\n              email: email\n            };\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(schema.validate(data));\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(api.post(\"/users/forgot_password\", data).then(function (response) {\n              if (response.status === 201) {\n                setIsDisabled(false);\n                navigation.navigate(\"ForgotPasswordSecondStep\", {\n                  data: data\n                });\n              }\n            }));\n          case 8:\n            _context.next = 19;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](1);\n            if (!(_context.t0 instanceof Yup.ValidationError)) {\n              _context.next = 17;\n              break;\n            }\n            setIsDisabled(false);\n            return _context.abrupt(\"return\", Alert.alert(\"Opa\", _context.t0.message));\n          case 17:\n            setIsDisabled(false);\n            return _context.abrupt(\"return\", Alert.alert(\"Opa, parece que o email infomado não foi encontrado !\"));\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 10]], Promise);\n  }\n  return _jsxs(Container, {\n    children: [_jsx(StatusBar, {\n      barStyle: \"light-content\",\n      backgroundColor: \"transparent\",\n      translucent: true\n    }), _jsx(Logo, {\n      children: _jsx(Makeyourgologo, {})\n    }), _jsxs(TitleDiv, {\n      children: [_jsx(Title, {\n        children: \"Recupere sua senha\"\n      }), _jsxs(Subtitle, {\n        children: [\"Insira seu email para procurar \", \"\\n\", \"a sua conta.\"]\n      })]\n    }), _jsxs(Form, {\n      children: [_jsx(Input, {\n        title: \"Email\",\n        onChangeText: setEmail,\n        value: email\n      }), _jsx(Button, {\n        title: \"Pesquisar\",\n        onPress: handleNextStep,\n        disabled: isDisabled\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useNavigation","Container","Form","Logo","Subtitle","Title","TitleDiv","Makeyourgologo","Input","Button","api","Yup","Alert","StatusBar","jsx","_jsx","jsxs","_jsxs","ForgotPasswordFirstStep","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","isDisabled","setIsDisabled","navigation","handleNextStep","schema","data","_regeneratorRuntime","async","handleNextStep$","_context","prev","next","object","shape","string","required","awrap","validate","post","then","response","status","navigate","t0","ValidationError","abrupt","alert","message","stop","Promise","children","barStyle","backgroundColor","translucent","title","onChangeText","value","onPress","disabled"],"sources":["C:/Users/Guilherme/Documents/MakeYourGO/mobile/src/pages/ForgotPasswordPage/ForgotPasswordFirstStep/index.tsx"],"sourcesContent":["/* eslint-disable space-before-function-paren */\r\nimport React, { useState } from \"react\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Container, Form, Logo, Subtitle, Title, TitleDiv } from \"./styles\";\r\nimport Makeyourgologo from \"../../../assets/makeyourgo.svg\";\r\nimport { Input } from \"../../../components/Input\";\r\nimport { Button } from \"../../../components/Button\";\r\n\r\nimport { api } from \"../../../services/api\";\r\nimport * as Yup from \"yup\";\r\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\r\nimport { RootStackParamList } from \"../../../routes/AppStack\";\r\nimport { Alert, StatusBar } from \"react-native\";\r\n\r\nexport function ForgotPasswordFirstStep() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n\r\n  const navigation = useNavigation();\r\n\r\n  async function handleNextStep() {\r\n    setIsDisabled(true);\r\n\r\n    try {\r\n      const schema = Yup.object().shape({\r\n        email: Yup.string()\r\n          .email(\"E-mail inválido\")\r\n          .required(\"E-mail é obrigatório\"),\r\n      });\r\n\r\n      const data = { email };\r\n      await schema.validate(data);\r\n\r\n      await api.post(\"/users/forgot_password\", data).then((response) => {\r\n        if (response.status === 201) {\r\n          setIsDisabled(false);\r\n          navigation.navigate(\"ForgotPasswordSecondStep\", { data });\r\n        }\r\n      });\r\n    } catch (error) {\r\n      if (error instanceof Yup.ValidationError) {\r\n        setIsDisabled(false);\r\n        return Alert.alert(\"Opa\", error.message);\r\n      } else {\r\n        setIsDisabled(false);\r\n        return Alert.alert(\r\n          \"Opa, parece que o email infomado não foi encontrado !\"\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <StatusBar\r\n        barStyle=\"light-content\"\r\n        backgroundColor=\"transparent\"\r\n        translucent\r\n      />\r\n      <Logo>\r\n        <Makeyourgologo />\r\n      </Logo>\r\n\r\n      <TitleDiv>\r\n        <Title>Recupere sua senha</Title>\r\n\r\n        <Subtitle>Insira seu email para procurar {`\\n`}a sua conta.</Subtitle>\r\n      </TitleDiv>\r\n      <Form>\r\n        <Input title=\"Email\" onChangeText={setEmail} value={email} />\r\n\r\n        <Button\r\n          title=\"Pesquisar\"\r\n          onPress={handleNextStep}\r\n          disabled={isDisabled}\r\n        />\r\n      </Form>\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}