{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nimport { Container, Form } from \"./styles\";\nimport Makeyourgologo from \"../../assets/makeyourgo.svg\";\nimport { Button } from \"../../components/Button\";\nimport * as Yup from \"yup\";\nimport { api } from \"../../services/api\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { InputForm } from \"../../components/Input/InputForm\";\nimport { InputFormPassword } from \"../../components/InputPassword/InputFormPassword\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar schema = Yup.object().shape({\n  name: Yup.string().required(),\n  email: Yup.string().required(),\n  senha: Yup.string().required(),\n  senhaConfirmation: Yup.string().oneOf([Yup.ref(\"senha\"), null])\n});\nexport function RegisterPage() {\n  var _useAuth = useAuth(),\n    signIn = _useAuth.signIn;\n  var _useForm = useForm({\n      resolver: yupResolver(schema)\n    }),\n    control = _useForm.control,\n    handleSubmit = _useForm.handleSubmit,\n    errors = _useForm.formState.errors;\n  function handleRegister(form) {\n    var data;\n    return _regeneratorRuntime.async(function handleRegister$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = {\n              name: form.name,\n              email: form.email,\n              senha: form.senha\n            };\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(api.post(\"/users\", data).then(function (response) {\n              signIn(form.email, form.senha);\n            }));\n          case 4:\n            _context.next = 10;\n            break;\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](1);\n            console.log(_context.t0);\n            Alert.alert(\"Opa\", \"Parece que esse email ja está sendo utilizado.\");\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 6]], Promise);\n  }\n  return _jsxs(Container, {\n    children: [_jsx(StatusBar, {\n      barStyle: \"light-content\",\n      backgroundColor: \"transparent\",\n      translucent: true\n    }), _jsx(Makeyourgologo, {}), _jsxs(Form, {\n      children: [_jsx(InputForm, {\n        control: control,\n        name: \"name\",\n        title: \"Nome\",\n        autoCapitalize: \"sentences\",\n        autoCorrect: false,\n        error: !!errors.name\n      }), _jsx(InputForm, {\n        control: control,\n        name: \"email\",\n        title: \"Email\",\n        autoCapitalize: \"sentences\",\n        autoCorrect: false,\n        error: !!errors.email\n      }), _jsx(InputFormPassword, {\n        control: control,\n        name: \"senha\",\n        title: \"Senha\",\n        autoCapitalize: \"sentences\",\n        autoCorrect: false,\n        error: !!(errors.senha || errors.senhaConfirmation)\n      }), _jsx(InputFormPassword, {\n        control: control,\n        name: \"senhaConfirmation\",\n        title: \"Confirme a senha\",\n        autoCapitalize: \"sentences\",\n        autoCorrect: false,\n        error: !!errors.senhaConfirmation\n      }), _jsx(Button, {\n        title: \"Cadastrar\",\n        onPress: handleSubmit(handleRegister)\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","Container","Form","Makeyourgologo","Button","Yup","api","useAuth","Alert","StatusBar","useForm","yupResolver","InputForm","InputFormPassword","jsx","_jsx","jsxs","_jsxs","schema","object","shape","name","string","required","email","senha","senhaConfirmation","oneOf","ref","RegisterPage","_useAuth","signIn","_useForm","resolver","control","handleSubmit","errors","formState","handleRegister","form","data","_regeneratorRuntime","async","handleRegister$","_context","prev","next","awrap","post","then","response","t0","console","log","alert","stop","Promise","children","barStyle","backgroundColor","translucent","title","autoCapitalize","autoCorrect","error","onPress"],"sources":["C:/Users/Guilherme/Documents/MakeYourGO/mobile/src/pages/RegisterPage/index.tsx"],"sourcesContent":["/* eslint-disable space-before-function-paren */\r\nimport React, { useState } from \"react\";\r\n\r\nimport { Container, Form } from \"./styles\";\r\nimport Makeyourgologo from \"../../assets/makeyourgo.svg\";\r\nimport { Input } from \"../../components/Input\";\r\nimport { Button } from \"../../components/Button\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { api } from \"../../services/api\";\r\n\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport { Alert, StatusBar } from \"react-native\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { InputForm } from \"../../components/Input/InputForm\";\r\nimport { InputFormPassword } from \"../../components/InputPassword/InputFormPassword\";\r\n\r\ninterface FormData {\r\n  name: string;\r\n  email: string;\r\n  senha: string;\r\n}\r\n\r\nconst schema = Yup.object().shape({\r\n  name: Yup.string().required(),\r\n  email: Yup.string().required(),\r\n  senha: Yup.string().required(),\r\n  senhaConfirmation: Yup.string().oneOf([Yup.ref(\"senha\"), null]),\r\n});\r\n\r\nexport function RegisterPage() {\r\n  const { signIn } = useAuth();\r\n\r\n  const {\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  async function handleRegister(form: FormData) {\r\n    const data = {\r\n      name: form.name,\r\n      email: form.email,\r\n      senha: form.senha,\r\n    };\r\n\r\n    try {\r\n      await api.post(\"/users\", data).then((response) => {\r\n        signIn(form.email, form.senha);\r\n      });\r\n    } catch (err) {\r\n      console.log(err);\r\n      Alert.alert(\"Opa\", \"Parece que esse email ja está sendo utilizado.\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <StatusBar\r\n        barStyle=\"light-content\"\r\n        backgroundColor=\"transparent\"\r\n        translucent\r\n      />\r\n      <Makeyourgologo />\r\n\r\n      <Form>\r\n        <InputForm\r\n          control={control}\r\n          name=\"name\"\r\n          title=\"Nome\"\r\n          autoCapitalize=\"sentences\"\r\n          autoCorrect={false}\r\n          error={!!errors.name}\r\n        />\r\n        <InputForm\r\n          control={control}\r\n          name=\"email\"\r\n          title=\"Email\"\r\n          autoCapitalize=\"sentences\"\r\n          autoCorrect={false}\r\n          error={!!errors.email}\r\n        />\r\n        <InputFormPassword\r\n          control={control}\r\n          name=\"senha\"\r\n          title=\"Senha\"\r\n          autoCapitalize=\"sentences\"\r\n          autoCorrect={false}\r\n          error={!!(errors.senha || errors.senhaConfirmation)}\r\n        />\r\n        <InputFormPassword\r\n          control={control}\r\n          name=\"senhaConfirmation\"\r\n          title=\"Confirme a senha\"\r\n          autoCapitalize=\"sentences\"\r\n          autoCorrect={false}\r\n          error={!!errors.senhaConfirmation}\r\n        />\r\n        <Button title=\"Cadastrar\" onPress={handleSubmit(handleRegister)} />\r\n      </Form>\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":";AACA,OAAOA,KAAK,MAAoB,OAAO;AAEvC,SAASC,SAAS,EAAEC,IAAI;AACxB,OAAOC,cAAc;AAErB,SAASC,MAAM;AAEf,OAAO,KAAKC,GAAG,MAAM,KAAK;AAC1B,SAASC,GAAG;AAEZ,SAASC,OAAO;AAAqC,OAAAC,KAAA;AAAA,OAAAC,SAAA;AAErD,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,SAAS;AAClB,SAASC,iBAAiB;AAA2D,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAQrF,IAAMC,MAAM,GAAGb,GAAG,CAACc,MAAM,EAAE,CAACC,KAAK,CAAC;EAChCC,IAAI,EAAEhB,GAAG,CAACiB,MAAM,EAAE,CAACC,QAAQ,EAAE;EAC7BC,KAAK,EAAEnB,GAAG,CAACiB,MAAM,EAAE,CAACC,QAAQ,EAAE;EAC9BE,KAAK,EAAEpB,GAAG,CAACiB,MAAM,EAAE,CAACC,QAAQ,EAAE;EAC9BG,iBAAiB,EAAErB,GAAG,CAACiB,MAAM,EAAE,CAACK,KAAK,CAAC,CAACtB,GAAG,CAACuB,GAAG,CAAC,OAAO,CAAC,EAAE,IAAI,CAAC;AAChE,CAAC,CAAC;AAEF,OAAO,SAASC,YAAYA,CAAA,EAAG;EAC7B,IAAAC,QAAA,GAAmBvB,OAAO,EAAE;IAApBwB,MAAM,GAAAD,QAAA,CAANC,MAAM;EAEd,IAAAC,QAAA,GAIItB,OAAO,CAAC;MACVuB,QAAQ,EAAEtB,WAAW,CAACO,MAAM;IAC9B,CAAC,CAAC;IALAgB,OAAO,GAAAF,QAAA,CAAPE,OAAO;IACPC,YAAY,GAAAH,QAAA,CAAZG,YAAY;IACCC,MAAM,GAAAJ,QAAA,CAAnBK,SAAS,CAAID,MAAM;EAKrB,SAAeE,cAAcA,CAACC,IAAc;IAAA,IAAAC,IAAA;IAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAC,gBAAAC,QAAA;MAAA;QAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YACpCN,IAAI,GAAG;cACXnB,IAAI,EAAEkB,IAAI,CAAClB,IAAI;cACfG,KAAK,EAAEe,IAAI,CAACf,KAAK;cACjBC,KAAK,EAAEc,IAAI,CAACd;YACd,CAAC;YAAAmB,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAAAL,mBAAA,CAAAM,KAAA,CAGOzC,GAAG,CAAC0C,IAAI,CAAC,QAAQ,EAAER,IAAI,CAAC,CAACS,IAAI,CAAC,UAACC,QAAQ,EAAK;cAChDnB,MAAM,CAACQ,IAAI,CAACf,KAAK,EAAEe,IAAI,CAACd,KAAK,CAAC;YAChC,CAAC,CAAC;UAAA;YAAAmB,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;YAEFQ,OAAO,CAACC,GAAG,CAAAT,QAAA,CAAAO,EAAA,CAAK;YAChB3C,KAAK,CAAC8C,KAAK,CAAC,KAAK,EAAE,gDAAgD,CAAC;UAAC;UAAA;YAAA,OAAAV,QAAA,CAAAW,IAAA;QAAA;MAAA;IAAA,yBAAAC,OAAA;EAAA;EAIzE,OACEvC,KAAA,CAAChB,SAAS;IAAAwD,QAAA,GACR1C,IAAA,CAACN,SAAS;MACRiD,QAAQ,EAAC,eAAe;MACxBC,eAAe,EAAC,aAAa;MAC7BC,WAAW;IAAA,EACX,EACF7C,IAAA,CAACZ,cAAc,KAAG,EAElBc,KAAA,CAACf,IAAI;MAAAuD,QAAA,GACH1C,IAAA,CAACH,SAAS;QACRsB,OAAO,EAAEA,OAAQ;QACjBb,IAAI,EAAC,MAAM;QACXwC,KAAK,EAAC,MAAM;QACZC,cAAc,EAAC,WAAW;QAC1BC,WAAW,EAAE,KAAM;QACnBC,KAAK,EAAE,CAAC,CAAC5B,MAAM,CAACf;MAAK,EACrB,EACFN,IAAA,CAACH,SAAS;QACRsB,OAAO,EAAEA,OAAQ;QACjBb,IAAI,EAAC,OAAO;QACZwC,KAAK,EAAC,OAAO;QACbC,cAAc,EAAC,WAAW;QAC1BC,WAAW,EAAE,KAAM;QACnBC,KAAK,EAAE,CAAC,CAAC5B,MAAM,CAACZ;MAAM,EACtB,EACFT,IAAA,CAACF,iBAAiB;QAChBqB,OAAO,EAAEA,OAAQ;QACjBb,IAAI,EAAC,OAAO;QACZwC,KAAK,EAAC,OAAO;QACbC,cAAc,EAAC,WAAW;QAC1BC,WAAW,EAAE,KAAM;QACnBC,KAAK,EAAE,CAAC,EAAE5B,MAAM,CAACX,KAAK,IAAIW,MAAM,CAACV,iBAAiB;MAAE,EACpD,EACFX,IAAA,CAACF,iBAAiB;QAChBqB,OAAO,EAAEA,OAAQ;QACjBb,IAAI,EAAC,mBAAmB;QACxBwC,KAAK,EAAC,kBAAkB;QACxBC,cAAc,EAAC,WAAW;QAC1BC,WAAW,EAAE,KAAM;QACnBC,KAAK,EAAE,CAAC,CAAC5B,MAAM,CAACV;MAAkB,EAClC,EACFX,IAAA,CAACX,MAAM;QAACyD,KAAK,EAAC,WAAW;QAACI,OAAO,EAAE9B,YAAY,CAACG,cAAc;MAAE,EAAG;IAAA,EAC9D;EAAA,EACG;AAEhB"},"metadata":{},"sourceType":"module","externalDependencies":[]}